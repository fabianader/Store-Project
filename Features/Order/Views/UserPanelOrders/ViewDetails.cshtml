@using StoreProject.Common
@using StoreProject.Features.Order.Models
@model UserPanelOrderDetailsModel
@{
	Layout = "_UserPanelLayout";
	ViewData["Title"] = "Order Details";
	ViewData["ActivePage"] = "Orders";
    var currentUrl = $"{Context.Request.Path}{Context.Request.QueryString}";
}
<div class="card">
    <div class="card-body">

            <h5 class="card-title">Order Details:</h5>

            <p><strong>Order Id: </strong>@Model.Id</p>
            <p><strong>Full name: </strong>@Model.FullName</p>
            <p><strong>Email: </strong>@Model.Email</p>
            <p><strong>Phone number: </strong>@Model.PhoneNumber</p>
            <p><strong>Order date: </strong>@Model.OrderDate.ToLongDateString()</p>
            <p><strong>Total Price: </strong>$@Model.TotalPrice</p>
            <p><strong>Address: </strong>@Model.ShippingAddress</p>
            <p>
                <strong>Status: </strong>
                <span class="text-@CommonService.GetOrderStatusBootstrapColor((int)Model.Status)">@Model.Status</span>
            </p>

            <div class="card-body table-responsive p-0">
                <table class="table table-hover text-nowrap">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Unit Price</th>
                            <th>Product Total</th>
                        </tr>
                    </thead>

                    <tbody>
                    @foreach (var item in Model.OrderItems)
                    {
                        <tr>
                            <td>@item.ProductTitle</td>
                            <td>@item.Quantity</td>
                            <td>$@item.UnitPrice</td>
                            <td>$@(item.UnitPrice * item.Quantity)</td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>

            @if(Model.Status == 0)
            {
                <open-modal tag="button" modal-size="sm" style="cursor:pointer;" class="btn btn-danger" 
                    url="@Url.Action("ViewCancelOrderModal", "UserPanelOrders", new { orderId = Model.Id, callBackUrl = currentUrl })">
                    Cancel the Order 
                </open-modal>
            }
    </div>
</div>
